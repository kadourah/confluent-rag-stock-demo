"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const buffer_wrapper_1 = require("../../serde/buffer-wrapper");
(0, globals_1.describe)('BufferWrapper', () => {
    (0, globals_1.it)('write and read 100', () => {
        const buf = Buffer.alloc(buffer_wrapper_1.MAX_VARINT_LEN_32);
        const bw = new buffer_wrapper_1.BufferWrapper(buf);
        bw.writeVarInt(100);
        const bw2 = new buffer_wrapper_1.BufferWrapper(bw.buf.subarray(0, bw.pos));
        (0, globals_1.expect)(bw2.readVarInt()).toBe(100);
    });
    (0, globals_1.it)('write and read max pos int', () => {
        const buf = Buffer.alloc(buffer_wrapper_1.MAX_VARINT_LEN_32);
        const bw = new buffer_wrapper_1.BufferWrapper(buf);
        bw.writeVarInt(2147483647);
        const bw2 = new buffer_wrapper_1.BufferWrapper(bw.buf.subarray(0, bw.pos));
        (0, globals_1.expect)(bw2.readVarInt()).toBe(2147483647);
    });
    (0, globals_1.it)('write and read max neg int', () => {
        const buf = Buffer.alloc(buffer_wrapper_1.MAX_VARINT_LEN_32);
        const bw = new buffer_wrapper_1.BufferWrapper(buf);
        bw.writeVarInt(-2147483648);
        const bw2 = new buffer_wrapper_1.BufferWrapper(bw.buf.subarray(0, bw.pos));
        (0, globals_1.expect)(bw2.readVarInt()).toBe(-2147483648);
    });
});
